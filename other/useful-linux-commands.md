# Полезные команды Linux

Для некоторых задач Movable Type могут потребоваться навыки работы с командной строкой Linux. Это очень просто, достаточно знать основные команды, которые понимает Linux-сервер.

Взаимодействие с сервером происходит по протоколу [SSH](http://ru.wikipedia.org/wiki/SSH), поэтому, если вы работаете в ОС Windows, вам необходимо будет установить программу для работы с SSH (в Linux и Mac OS ничего дополнительно устанавливать не требуется):

* [PuTTY](http://www.chiark.greenend.org.uk/~sgtatham/putty/) ([русскоязычный сайт PuTTY](http://putty.org.ru/)\) — бесплатная программа для работы с SSH, не требующая установки.
* [ExtraPuTTY](http://www.extraputty.com/) — расширенная версия PuTTY.
* [SecureCRT](http://www.vandyke.com/products/securecrt/) — мощная программа для работы по SSH (поддерживающая многие другие протоколы).

## Архивация/Разархивация

Создание tar.gz-архива:
```bash
tar czf имя-архива.tar.gz имя-папки
```

Распаковка tar.gz-архива:
```bash
tar xzf имя-архива.tar.gz
```

Создание tar.bz2-архива:
```bash
tar cjf имя-архива.tar.bz2 имя-папки
```

Распаковка tar.bz2-архива:
```bash
tar xjf имя-архива.tar.bz2
```

Распаковка rar-архива:
```bash
unrar x имя-архива.rar
```

## Работа с файлами и папками

Список файлов и папок:
```bash
ls
```

Полный список файлов и папок, включая скрытые:
```bash
ls -a
```

Сменить директорию:
```bash
cd имя-каталога
```

Примеры использования:

* `cd /` — переход в корневую директорию диска;
* `cd ..` — переход на один уровень выше;
* `cd ../..` — переход на 2 уровня вверх;
* `cd $HOME` — переход в домашнюю директорию (достаточно набрать просто `cd`);
* `cd /home/имя-папки/имя-подпапки` — переход в указанную папку.

Создание папки:
```bash
mkdir имя-папки
```

Удаление файла или папки:
```bash
rm имя-файла
```

Удаление файлов и папок рекурсивно (включая все вложенные файлы и папки):
```bash
rm -r имя-папки
```

Скопировать файл:
```bash
cp имя-файла имя-копии-файла
```

Скопировать папку:
```bash
cp -r имя-папки имя-копии-папки
```

Переименовать файл:
```bash
mv имя-файла новое-имя-файла
```
Если «новое-имя-файла» — это папка, то файл будет перемещён в эту папку.

Создать символическую ссылку:
```bash
ln -s имя-файла имя-ссылки
```

Изменение прав доступа (CHMOD) у файла или папки:
```bash
chmod 755 имя-папки
```

Изменение прав доступа (CHMOD) у всех файлов рекурсивно:
```bash
find . -type f | xargs chmod 644
```

Изменение прав доступа (CHMOD) у всех файлов с определённым расширением рекурсивно:
```bash
find . -name '*.cgi' -type f | xargs chmod 755
```

Изменение прав доступа (CHMOD) у папок рекурсивно:
```bash
find . -type d | xargs chmod 755
```

## Бэкап базы данных

Бекап базы данных с помощью mysqldump (команда должна быть в одной сроке):
```bash
mysqldump --user=ПОЛЬЗОВАТЕЛЬ --host=ХОСТ -acnqQ --single-transaction --default-character-set=КОДИРОВКА --password=ПАРОЛЬ -- БАЗА_ДАННЫХ | sed "s#^CREATE TABLE#\0 IF NOT EXISTS# ; s#^INSERT INTO#REPLACE INTO#" | gzip -qf9c > /home/username/путь-где-будут-храниться-бэкапы/имя-базы-данных-`date +%Y-%m-%d`.sql.gz
```

Пример кодировки: `cp1251`, `utf8`.

## Работа с Perl

Выполнение Perl-скрипта:
```bash
perl имя-скрипта.cgi
```

Установка модулей Perl через CPAN:
```bash
install ИМЯ::МОДУЛЯ
```

Перед выполнением этой команды необходимо войти в CPAN, выполнив следующую команду:
```bash
perl -MCPAN -e "shell"
```

## Другие полезные команды

Закачать файл на сервер:
```bash
wget http://example.com/filename.zip
```

Список процессов:
```bash
top
```

Список процессов определённого пользователя:
```bash
top -u имя-пользователя
```

Текущая дата:
```bash
date
```

Сменить пароль:
```bash
passwd
```

Сменить пароль у определённого пользователя:
```bash
passwd имя-пользователя
```

Показать информацию и ядре:
```bash
uname -a
```

Показать информацию о CPU:
```bash
cat /proc/cpuinfo
```

Показать информацию о памяти:
```bash
cat /proc/meminfo
```

Показать информацию об использовании дисков:
```bash
df
```

Перезапустить какой-нибудь сервис:
```bash
/etc/init.d/имя-сервиса команда
```
Например: `/etc/init.d/apache2 restart`

Информация об использовании памяти и swap:
```bash
free
```

Возможное расположение приложения:
```bash
whereis имя-приложения
```
Например: `whereis apache2`

Перезагрузить сервер (полная перезагрузка):
```bash
reboot
```

## Клавиатурные сочетания

* `Ctrl+C` — завершить текущую команду.
* `Ctrl+D` — разлогиниться (аналогично exit).
* `Ctrl+W` — удалить одно слово в текущей строке.
* `Ctrl+U` — удалить строку.
* `!!` — повторить последнюю команду.
* `exit` — разлогиниться.

## Другие списки Linux-команд

* [Большой список команд на Linux SoftWare Library](http://www.linuxsoft.ru/lib/articles/ar1921/index.php)
* [A couple of tricks with the secure shell](http://www.debian-administration.org/articles/438) — Различные трюки работы с SSH
* [commandlinefu.com](http://commandlinefu.com) — Сборник команд Linux
* [shell-fu](http://www.shell-fu.org/) — Ещё один сборник команд
* [Программы UNIX-подобных операционных систем](http://ru.wikipedia.org/wiki/Программы_UNIX-подобных_операционных_систем) — сборник команд в Википедии.
